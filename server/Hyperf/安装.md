
# 安装Hyperf

官方地址：
```
首页
https://www.hyperf.io/

官方文档
https://hyperf.wiki/2.1/#/

安装文档
https://hyperf.wiki/2.1/#/zh-cn/quick-start/install
```

源码地址：
```
github地址
https://github.com/hyperf/hyperf

gitee地址
https://gitee.com/hyperf/hyperf

模板项目地址
https://github.com/hyperf/hyperf-skeleton
```

docker镜像
```
docker仓库地址
https://hub.docker.com/r/hyperf/hyperf

docker源码，使用说明地址
https://github.com/hyperf/hyperf-docker
```

## 服务器直接部署
### 服务器环境要求
* PHP >= 7.3
* Swoole PHP 扩展 >= 4.5，并关闭了 Short Name
* OpenSSL PHP 扩展
* JSON PHP 扩展
* PDO PHP 扩展 （如需要使用到 MySQL 客户端）
* Redis PHP 扩展 （如需要使用到 Redis 客户端）
* Protobuf PHP 扩展 （如需要使用到 gRPC 服务端或客户端）


## Docker安装(官方方式)

https://hub.docker.com/r/hyperf/hyperf

### 拉取镜像
```shell
docker pull hyperf/hyperf:7.4-alpine-v3.12-swoole-v4.5.10
```
镜像说明：
* 7.4: php版本, 支持 7.2/7.3/7.4
* alpine: 基础系统镜像, 支持 alpine/centos
* v3.12: alpine的version, 支持 alpine 3.9 and 3.10
* cli: 支持 base/cli, base 用于 php 环境, cli 表示 在 base 基础上添加了 swoole 扩展
* v4.5.10: swoole 的版本


### 执行Docker脚本
```shell
docker run --name hyperf \
-v /workspace/skeleton:/data/project \
-p 9501:9501 -it \
--privileged -u root \
--entrypoint /bin/sh \
hyperf/hyperf:7.4-alpine-v3.11-swoole
```
启动说明：
* 目录映射：
  
  可以根据实际情况，映射到宿主机对应的目录，以下以 /workspace/skeleton 为例
* 执行权限：
  
  如果 docker 启动时开启了 selinux-enabled 选项，容器内访问宿主机资源就会受限，所以启动容器时可以增加 --privileged -u root 选项

### 创建项目
将 Composer 镜像设置为阿里云镜像，加速国内下载速度
```shell
composer config -g repo.packagist composer https://mirrors.aliyun.com/composer
```

创建项目
```shell
cd /data/project
composer create-project hyperf/hyperf-skeleton
```

启动项目
```shell
cd hyperf-skeleton
php bin/hyperf.php start
```

接下来，就可以在宿主机 /workspace/skeleton/hyperf-skeleton 中看到您安装好的代码了。 由于 Hyperf 是持久化的 CLI 框架，当您修改完您的代码后，通过 CTRL + C 终止当前启动的进程实例，并重新执行 php bin/hyperf.php start 启动命令即可。


## Docker安装（常规开发模式）


### 参考
* [[手把手教你] 1分钟搭建Hyperf](https://www.imooc.com/article/289253)
* [Hyperf框架 - docker中运行Hyperf项目](https://blog.csdn.net/raoxiaoya/article/details/107593777)